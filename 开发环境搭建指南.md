# ä¹’ä¹“çƒåŸ¹è®­ç®¡ç†ç³»ç»Ÿ - å¼€å‘ç¯å¢ƒæ­å»ºæŒ‡å—

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

### ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Windows 10/11, macOS 10.15+, Ubuntu 18.04+
- **å†…å­˜**: æœ€ä½8GBï¼Œæ¨è16GB
- **ç£ç›˜ç©ºé—´**: è‡³å°‘10GBå¯ç”¨ç©ºé—´

### è½¯ä»¶ä¾èµ–
- **Node.js**: v18.0.0+ (æ¨è LTS ç‰ˆæœ¬)
- **npm**: v8.0.0+ æˆ– **yarn**: v1.22.0+
- **PostgreSQL**: v14.0+
- **Redis**: v6.0+
- **Git**: v2.30.0+
- **Docker**: v20.0+ (å¯é€‰ï¼Œæ¨è)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šDocker ä¸€é”®å¯åŠ¨ (æ¨è)

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/your-org/table-tennis-management.git
cd table-tennis-management

# 2. å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# 3. ç­‰å¾…æœåŠ¡å¯åŠ¨å®Œæˆ
docker-compose logs -f

# 4. è®¿é—®åº”ç”¨
# å‰ç«¯: http://localhost:3000
# åç«¯: http://localhost:5000
# æ•°æ®åº“: localhost:5432
```

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘ç¯å¢ƒ

## ğŸ”§ è¯¦ç»†å®‰è£…æ­¥éª¤

### 1. å®‰è£… Node.js

#### Windows
```bash
# ä½¿ç”¨ Chocolatey
choco install nodejs

# æˆ–ä»å®˜ç½‘ä¸‹è½½
# https://nodejs.org/
```

#### macOS
```bash
# ä½¿ç”¨ Homebrew
brew install node

# æˆ–ä½¿ç”¨ nvm (æ¨è)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 18
nvm use 18
```

#### Linux (Ubuntu)
```bash
# ä½¿ç”¨ NodeSource
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# æˆ–ä½¿ç”¨ nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 18
nvm use 18
```

### 2. å®‰è£… PostgreSQL

#### Windows
```bash
# ä½¿ç”¨ Chocolatey
choco install postgresql

# æˆ–ä»å®˜ç½‘ä¸‹è½½
# https://www.postgresql.org/download/windows/
```

#### macOS
```bash
# ä½¿ç”¨ Homebrew
brew install postgresql
brew services start postgresql

# åˆ›å»ºæ•°æ®åº“ç”¨æˆ·
createuser -s postgres
```

#### Linux (Ubuntu)
```bash
sudo apt update
sudo apt install postgresql postgresql-contrib
sudo systemctl start postgresql
sudo systemctl enable postgresql

# è®¾ç½®postgresç”¨æˆ·å¯†ç 
sudo -u postgres psql
\password postgres
\q
```

### 3. å®‰è£… Redis

#### Windows
```bash
# ä½¿ç”¨ WSL2 + Ubuntuï¼Œç„¶å:
sudo apt install redis-server
sudo service redis-server start
```

#### macOS
```bash
brew install redis
brew services start redis
```

#### Linux (Ubuntu)
```bash
sudo apt install redis-server
sudo systemctl start redis-server
sudo systemctl enable redis-server
```

### 4. å®‰è£…å¼€å‘å·¥å…·

#### Git
```bash
# Windows (Chocolatey)
choco install git

# macOS (Homebrew)
brew install git

# Linux (Ubuntu)
sudo apt install git
```

#### Docker (å¯é€‰ä½†æ¨è)
```bash
# Windows: ä¸‹è½½ Docker Desktop
# https://www.docker.com/products/docker-desktop

# macOS:
brew install --cask docker

# Linux:
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh
```

## ğŸ“¦ é¡¹ç›®åˆå§‹åŒ–

### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/your-org/table-tennis-management.git
cd table-tennis-management
```

### 2. å®‰è£…ä¾èµ–

#### åç«¯ä¾èµ–
```bash
cd backend
npm install

# æˆ–ä½¿ç”¨ yarn
yarn install
```

#### å‰ç«¯ä¾èµ–
```bash
cd ../frontend
npm install

# æˆ–ä½¿ç”¨ yarn
yarn install
```

### 3. ç¯å¢ƒå˜é‡é…ç½®

#### åç«¯ç¯å¢ƒå˜é‡ (.env)
```bash
# åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶
cd backend
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶
nano .env
```

```env
# .env æ–‡ä»¶å†…å®¹
NODE_ENV=development
PORT=5000

# æ•°æ®åº“é…ç½®
DATABASE_URL="postgresql://postgres:password@localhost:5432/ttms_dev"

# Redisé…ç½®
REDIS_URL="redis://localhost:6379"

# JWTé…ç½®
JWT_SECRET="your-super-secret-jwt-key-change-in-production"
JWT_EXPIRES_IN="7d"

# æ–‡ä»¶ä¸Šä¼ é…ç½®
UPLOAD_DIR="./uploads"
MAX_FILE_SIZE="5242880"

# æ”¯ä»˜é…ç½® (å¼€å‘ç¯å¢ƒä½¿ç”¨æ²™ç®±)
WECHAT_PAY_APP_ID="your-wechat-app-id"
WECHAT_PAY_MCH_ID="your-wechat-mch-id"
WECHAT_PAY_API_KEY="your-wechat-api-key"

ALIPAY_APP_ID="your-alipay-app-id"
ALIPAY_PRIVATE_KEY="your-alipay-private-key"

# é‚®ä»¶é…ç½®
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_USER="your-email@gmail.com"
SMTP_PASS="your-app-password"

# çŸ­ä¿¡é…ç½®
SMS_ACCESS_KEY="your-sms-access-key"
SMS_ACCESS_SECRET="your-sms-access-secret"
```

#### å‰ç«¯ç¯å¢ƒå˜é‡ (.env)
```bash
# åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶
cd ../frontend
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶
nano .env
```

```env
# .env æ–‡ä»¶å†…å®¹
VITE_API_BASE_URL=http://localhost:5000/api
VITE_SOCKET_URL=http://localhost:5000
VITE_UPLOAD_URL=http://localhost:5000/uploads
```

### 4. æ•°æ®åº“åˆå§‹åŒ–

```bash
cd backend

# ç”Ÿæˆ Prisma Client
npx prisma generate

# è¿è¡Œæ•°æ®åº“è¿ç§»
npx prisma migrate dev --name init

# å¡«å……ç§å­æ•°æ®
npx prisma db seed
```

### 5. éªŒè¯å®‰è£…

#### æ£€æŸ¥æœåŠ¡çŠ¶æ€
```bash
# æ£€æŸ¥ PostgreSQL
psql -U postgres -c "SELECT version();"

# æ£€æŸ¥ Redis
redis-cli ping

# æ£€æŸ¥ Node.js ç‰ˆæœ¬
node --version
npm --version
```

#### è¿è¡Œæµ‹è¯•
```bash
# åç«¯æµ‹è¯•
cd backend
npm test

# å‰ç«¯æµ‹è¯•
cd ../frontend
npm test
```

## ğŸš€ å¯åŠ¨å¼€å‘æœåŠ¡

### 1. å¯åŠ¨åç«¯æœåŠ¡
```bash
cd backend

# å¼€å‘æ¨¡å¼å¯åŠ¨ (è‡ªåŠ¨é‡å¯)
npm run dev

# æˆ–è€…
yarn dev
```

### 2. å¯åŠ¨å‰ç«¯æœåŠ¡
```bash
# æ–°å¼€ä¸€ä¸ªç»ˆç«¯
cd frontend

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æˆ–è€…
yarn dev
```

### 3. å¯åŠ¨æ•°æ®åº“æœåŠ¡

#### ä½¿ç”¨æœ¬åœ°å®‰è£…
```bash
# PostgreSQL
sudo systemctl start postgresql  # Linux
brew services start postgresql   # macOS

# Redis
sudo systemctl start redis      # Linux
brew services start redis       # macOS
```

#### ä½¿ç”¨Docker
```bash
# å¯åŠ¨æ•°æ®åº“å®¹å™¨
docker-compose up -d postgres redis
```

## ğŸ› ï¸ å¼€å‘å·¥å…·é…ç½®

### VS Code é…ç½®

#### æ¨èæ’ä»¶
```json
{
  "recommendations": [
    "ms-vscode.vscode-typescript-next",
    "Prisma.prisma",
    "esbenp.prettier-vscode",
    "ms-vscode.vscode-eslint",
    "formulahendry.auto-rename-tag",
    "bradlc.vscode-tailwindcss",
    "ms-vscode.vscode-json",
    "eamodio.gitlens",
    "rangav.vscode-thunder-client"
  ]
}
```

#### å·¥ä½œåŒºè®¾ç½® (.vscode/settings.json)
```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "typescript.preferences.importModuleSpecifier": "relative",
  "emmet.includeLanguages": {
    "typescript": "html",
    "typescriptreact": "html"
  }
}
```

### ä»£ç è§„èŒƒé…ç½®

#### Prettier é…ç½® (.prettierrc)
```json
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2,
  "useTabs": false
}
```

#### ESLint é…ç½® (.eslintrc.js)
```javascript
module.exports = {
  extends: [
    'eslint:recommended',
    '@typescript-eslint/recommended',
    'prettier'
  ],
  parser: '@typescript-eslint/parser',
  plugins: ['@typescript-eslint'],
  rules: {
    '@typescript-eslint/no-unused-vars': 'error',
    '@typescript-eslint/no-explicit-any': 'warn',
    'prefer-const': 'error',
    'no-var': 'error'
  }
};
```

## ğŸ³ Docker å¼€å‘ç¯å¢ƒ

### docker-compose.dev.yml
```yaml
version: '3.8'

services:
  # æ•°æ®åº“
  postgres:
    image: postgres:15-alpine
    environment:
      POSTGRES_DB: ttms_dev
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: password
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./backend/prisma/init.sql:/docker-entrypoint-initdb.d/init.sql

  # ç¼“å­˜
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

  # é‚®ä»¶æµ‹è¯•æœåŠ¡ (å¼€å‘ç”¨)
  mailhog:
    image: mailhog/mailhog
    ports:
      - "1025:1025"  # SMTP
      - "8025:8025"  # Web UI

  # æ•°æ®åº“ç®¡ç†å·¥å…·
  pgadmin:
    image: dpage/pgadmin4
    environment:
      PGADMIN_DEFAULT_EMAIL: admin@example.com
      PGADMIN_DEFAULT_PASSWORD: admin
    ports:
      - "5050:80"
    depends_on:
      - postgres

volumes:
  postgres_data:
  redis_data:
```

### å¯åŠ¨å¼€å‘ç¯å¢ƒ
```bash
# å¯åŠ¨æ•°æ®åº“æœåŠ¡
docker-compose -f docker-compose.dev.yml up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.dev.yml ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose.dev.yml logs -f
```

## ğŸ” è°ƒè¯•é…ç½®

### VS Code è°ƒè¯•é…ç½® (.vscode/launch.json)
```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Debug Backend",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/backend/src/index.ts",
      "outFiles": ["${workspaceFolder}/backend/dist/**/*.js"],
      "runtimeArgs": ["-r", "ts-node/register"],
      "env": {
        "NODE_ENV": "development"
      },
      "console": "integratedTerminal",
      "restart": true,
      "protocol": "inspector"
    },
    {
      "name": "Debug Frontend",
      "type": "node",
      "request": "launch",
      "cwd": "${workspaceFolder}/frontend",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "dev"]
    }
  ]
}
```

## ğŸ“ å¸¸ç”¨å¼€å‘å‘½ä»¤

### package.json è„šæœ¬
```json
{
  "scripts": {
    "dev": "concurrently \"npm run dev:backend\" \"npm run dev:frontend\"",
    "dev:backend": "cd backend && npm run dev",
    "dev:frontend": "cd frontend && npm run dev",
    "build": "npm run build:backend && npm run build:frontend",
    "build:backend": "cd backend && npm run build",
    "build:frontend": "cd frontend && npm run build",
    "test": "npm run test:backend && npm run test:frontend",
    "test:backend": "cd backend && npm test",
    "test:frontend": "cd frontend && npm test",
    "db:reset": "cd backend && npx prisma migrate reset",
    "db:seed": "cd backend && npx prisma db seed",
    "db:studio": "cd backend && npx prisma studio"
  }
}
```

### å¸¸ç”¨å‘½ä»¤
```bash
# å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒ
npm run dev

# é‡ç½®æ•°æ®åº“
npm run db:reset

# æ‰“å¼€æ•°æ®åº“ç®¡ç†ç•Œé¢
npm run db:studio

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# æŸ¥çœ‹æ•°æ®åº“è¿ç§»çŠ¶æ€
cd backend && npx prisma migrate status

# ç”Ÿæˆæ–°çš„æ•°æ®åº“è¿ç§»
cd backend && npx prisma migrate dev --name "your_migration_name"
```

## ğŸš¨ å¸¸è§é—®é¢˜

### 1. ç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
lsof -i :3000  # å‰ç«¯ç«¯å£
lsof -i :5000  # åç«¯ç«¯å£

# æ€æ­»å ç”¨è¿›ç¨‹
kill -9 <PID>
```

### 2. æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥PostgreSQLæœåŠ¡çŠ¶æ€
sudo systemctl status postgresql

# é‡å¯PostgreSQL
sudo systemctl restart postgresql

# æ£€æŸ¥è¿æ¥
psql -U postgres -h localhost -p 5432 -d ttms_dev
```

### 3. Redisè¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥RedisæœåŠ¡
redis-cli ping

# é‡å¯Redis
sudo systemctl restart redis
```

### 4. ä¾èµ–å®‰è£…å¤±è´¥
```bash
# æ¸…é™¤npmç¼“å­˜
npm cache clean --force

# åˆ é™¤node_modulesé‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm install

# æˆ–ä½¿ç”¨yarn
rm -rf node_modules yarn.lock
yarn install
```

### 5. Prismaç›¸å…³é—®é¢˜
```bash
# é‡æ–°ç”ŸæˆPrisma Client
npx prisma generate

# é‡ç½®æ•°æ®åº“æ¨¡å¼
npx prisma db push --force-reset

# æŸ¥çœ‹æ•°æ®åº“å†…å®¹
npx prisma studio
```

## ğŸ“š å¼€å‘èµ„æº

### æ–‡æ¡£é“¾æ¥
- [React å®˜æ–¹æ–‡æ¡£](https://react.dev/)
- [TypeScript å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/)
- [Ant Design ç»„ä»¶åº“](https://ant.design/)
- [Express.js æ–‡æ¡£](https://expressjs.com/)
- [Prisma æ–‡æ¡£](https://www.prisma.io/docs/)
- [PostgreSQL æ–‡æ¡£](https://www.postgresql.org/docs/)

### å­¦ä¹ èµ„æº
- [Node.js æœ€ä½³å®è·µ](https://github.com/goldbergyoni/nodebestpractices)
- [React æœ€ä½³å®è·µ](https://github.com/vasanthk/react-bits)
- [TypeScript æ·±å…¥ç†è§£](https://github.com/basarat/typescript-book)

---

**ç¯å¢ƒæ­å»ºå®Œæˆåï¼Œæ‚¨å°±å¯ä»¥å¼€å§‹å¼€å‘äº†ï¼**

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£æˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚